<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
</head>
<body>
    <h1>封号</h1>
    <label>玩家ID或账号</label><br>
    <input type="radio" name="pid" id="sel_player_id" checked="checked">玩家ID<br>
    <input type="radio" name="pid" id="sel_player_account">玩家账号<br>
    <input type="text" id="player_id">
    <input type="button" id="submit" value="提交" onclick="banPlayer(1)">
    <input type="button" id="submit" value="解除封号" onclick="banPlayer(0)">
    <p>结果: <div id="ban_result"></div></p>
    <br><a href="gm.html">返回</a><br>

    <script type="text/javascript">
        function checkInputContent() {
            player_id = document.getElementById("player_id").value;
            if (player_id == "") {
                alert("玩家ID或账号不能为空");
                return false;
            }
            return true;
        }
        function banPlayer($ban_or_free) {
            if (!checkInputContent()) {
                return;
            }
            if ($ban_or_free > 0) {
                if (!confirm("确定封号?")) {
                return;
                }
            }
            $.ajax({
                url: 'php/ban_player.php',
                type: 'POST',
                data: 'player_id='+$('#player_id').val()+'&ban_or_free='+$ban_or_free,
                async: true,
                cache: false,
                contentType: "application/x-www-form-urlencoded",
                processData: false,
                success: function (resultdata, status) {
                document.getElementById("ban_result").innerHTML = resultdata;
                    alert('请求发送成功 状态 ' + status + '数据 ' + resultdata);
                },
                error: function (returndata) {
                    alert('请求发送失败');
                }
            });
        }
    </script>
</body>
</html>